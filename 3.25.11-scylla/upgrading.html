

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Upgrading | ScyllaDB Docs 
        </title>
        <meta name="description" content="ScyllaDB is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://python-driver.docs.scylladb.com/stable/upgrading.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
              href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                  href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/css/main.css?v=ab597678" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/sphinx_collapse.css?v=226d88b4" />
            
        
            
                <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
            
        
    
        
        
            
        <script type="text/javascript" src="_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="_static/js/main.bundle.js"></script>
        
            <script src="_static/documentation_options.js?v=e12ea8a4"></script>
        
            <script src="_static/doctools.js?v=888ff710"></script>
        
            <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        
            <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        
            <script src="_static/copybutton.js?v=f281be69"></script>
        
    
            
                <!-- Zendesk tag -->
<meta name='zd-site-verification' content='gq6ltsh3nfex3cnwfy4aj9' />
            
            
                <!-- Google Tag Manager global -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Google Tag Manager docs -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-54NWVS4");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
            
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        <section class="promo-banner  promo-banner--hide" style="display: none;">
    <div class="promo-banner-wrapper">
        
        <div class="promo-banner__title">ScyllaDB University Live | Free Virtual Training Event</div>
        <a class="promo-banner__button button button--reverse" href="#"
           target="_blank" rel="noopener noreferrer">Learn more</a>
        <button class="promo-banner__close">
            <i class="scylla-icon scylla-icon--close"></i>
        </button>
    </div>
</section>
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="_static/img/logo-docs.svg" alt="ScyllaDB Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://opensource.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            ScyllaDB Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://enterprise.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>ScyllaDB Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--alternator"></i>
                            ScyllaDB Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="https://docs.scylladb.com/scylla-cloud/" class="scylla-dropdown__title">Cloud</a>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>ScyllaDB Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>ScyllaDB
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>ScyllaDB Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--alternator"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for a previous version of Scylla Python Driver.
            
            <a href="../stable/upgrading.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://docs.scylladb.com"
           class="bread__highlight">
            <i class="fas fa-home"></i> ScyllaDB Docs
        </a>
    </span>
    <span class="bread__item">
        <a href="index.html"
           class="bread__highlight">
            Scylla Python Driver
        </a>
    </span>
    
    <span class="bread__item bread__item--last">Upgrading</span>
</div>
                    </div>
                
                <section id="upgrading">
<h1>Upgrading<a class="headerlink" href="#upgrading" title="Link to this heading">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<section id="upgrading-from-dse-driver">
<h2>Upgrading from dse-driver<a class="headerlink" href="#upgrading-from-dse-driver" title="Link to this heading">¶</a></h2>
<p>Since 3.21.0, scylla-driver fully supports DataStax products. dse-driver and
dse-graph users should now migrate to scylla-driver to benefit from latest bug fixes
and new features. The upgrade to this new unified driver version is straightforward
with no major API changes.</p>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Link to this heading">¶</a></h3>
<p>Only the <cite>scylla-driver</cite> package should be installed. <cite>dse-driver</cite> and <cite>dse-graph</cite>
are not required anymore:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">scylla</span><span class="o">-</span><span class="n">driver</span>
</pre></div>
</div>
<p>If you need the Graph <em>Fluent</em> API (features provided by dse-graph):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">scylla</span><span class="o">-</span><span class="n">driver</span><span class="p">[</span><span class="n">graph</span><span class="p">]</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="installation.html"><span class="doc">Installation</span></a> for more details.</p>
</section>
<section id="import-from-the-cassandra-module">
<h3>Import from the cassandra module<a class="headerlink" href="#import-from-the-cassandra-module" title="Link to this heading">¶</a></h3>
<p>There is no <cite>dse</cite> module, so you should import from the <cite>cassandra</cite> module. You
need to change only the first module of your import statements, not the submodules.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dse.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span><span class="p">,</span> <span class="n">EXEC_PROFILE_GRAPH_DEFAULT</span>
<span class="kn">from</span> <span class="nn">dse.auth</span> <span class="kn">import</span> <span class="n">PlainTextAuthProvider</span>
<span class="kn">from</span> <span class="nn">dse.policies</span> <span class="kn">import</span> <span class="n">WhiteListRoundRobinPolicy</span>

<span class="c1"># becomes</span>

<span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span><span class="p">,</span> <span class="n">EXEC_PROFILE_GRAPH_DEFAULT</span>
<span class="kn">from</span> <span class="nn">cassandra.auth</span> <span class="kn">import</span> <span class="n">PlainTextAuthProvider</span>
<span class="kn">from</span> <span class="nn">cassandra.policies</span> <span class="kn">import</span> <span class="n">WhiteListRoundRobinPolicy</span>
</pre></div>
</div>
<p>Also note that the cassandra.hosts module doesn’t exist in scylla-driver. This
module is named cassandra.pool.</p>
</section>
<section id="dse-graph">
<h3>dse-graph<a class="headerlink" href="#dse-graph" title="Link to this heading">¶</a></h3>
<p>dse-graph features are now built into scylla-driver. The only change you need
to do is your import statements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dse_graph</span> <span class="kn">import</span> <span class="o">..</span>
<span class="kn">from</span> <span class="nn">dse_graph.query</span> <span class="kn">import</span> <span class="o">..</span>

<span class="c1"># becomes</span>

<span class="kn">from</span> <span class="nn">cassandra.datastax.graph.fluent</span> <span class="kn">import</span> <span class="o">..</span>
<span class="kn">from</span> <span class="nn">cassandra.datastax.graph.fluent.query</span> <span class="kn">import</span> <span class="o">..</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="api/cassandra/datastax/graph/fluent/index.html#module-cassandra.datastax.graph.fluent" title="cassandra.datastax.graph.fluent"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fluent</span></code></a>.</p>
</section>
<section id="session-execute-and-session-execute-async-api">
<h3>Session.execute and Session.execute_async API<a class="headerlink" href="#session-execute-and-session-execute-async-api" title="Link to this heading">¶</a></h3>
<p>Although it is not common to use this API with positional arguments, it is
important to be aware that the <cite>host</cite> and <cite>execute_as</cite> parameters have had
their positional order swapped. This is only because <cite>execute_as</cite> was added
in dse-driver before <cite>host</cite>.</p>
<p>See <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.execute" title="cassandra.cluster.Session.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Session.execute()</span></code></a>.</p>
</section>
<section id="deprecations">
<h3>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">¶</a></h3>
<p>These changes are optional, but recommended:</p>
<ul class="simple">
<li><p>Importing from <cite>cassandra.graph</cite> is deprecated. Consider importing from <cite>cassandra.datastax.graph</cite>.</p></li>
<li><p>Use <a class="reference internal" href="api/cassandra/policies.html#cassandra.policies.DefaultLoadBalancingPolicy" title="cassandra.policies.DefaultLoadBalancingPolicy"><code class="xref py py-class docutils literal notranslate"><span class="pre">DefaultLoadBalancingPolicy</span></code></a> instead of DSELoadBalancingPolicy.</p></li>
</ul>
</section>
</section>
<section id="upgrading-to-3-0">
<h2>Upgrading to 3.0<a class="headerlink" href="#upgrading-to-3-0" title="Link to this heading">¶</a></h2>
<p>Version 3.0 of the DataStax Python driver for Apache Cassandra
adds support for Cassandra 3.0 while maintaining support for
previously supported versions. In addition to substantial internal rework,
there are several updates to the API that integrators will need
to consider:</p>
<section id="default-consistency-is-now-local-one">
<h3>Default consistency is now <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code><a class="headerlink" href="#default-consistency-is-now-local-one" title="Link to this heading">¶</a></h3>
<p>Previous value was <code class="docutils literal notranslate"><span class="pre">ONE</span></code>. The new value is introduced to mesh with the default
DC-aware load balancing policy and to match other drivers.</p>
</section>
<section id="execution-api-updates">
<h3>Execution API Updates<a class="headerlink" href="#execution-api-updates" title="Link to this heading">¶</a></h3>
<section id="result-return-normalization">
<h4>Result return normalization<a class="headerlink" href="#result-return-normalization" title="Link to this heading">¶</a></h4>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-368">PYTHON-368</a></p>
<p>Previously results would be returned as a <code class="docutils literal notranslate"><span class="pre">list</span></code> of rows for result rows
up to <code class="docutils literal notranslate"><span class="pre">fetch_size</span></code>, and <code class="docutils literal notranslate"><span class="pre">PagedResult</span></code> afterward. This could break
application code that assumed one type and got another.</p>
<p>Now, all results are returned as an iterable <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResultSet" title="cassandra.cluster.ResultSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSet</span></code></a>.</p>
<p>The preferred way to consume results of unknown size is to iterate through
them, letting automatic paging occur as they are consumed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM system.local&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">process</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
<p>If the expected size of the results is known, it is still possible to
materialize a list using the iterator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM system.local&quot;</span><span class="p">)</span>
<span class="n">row_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<p>For backward compatibility, <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResultSet" title="cassandra.cluster.ResultSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSet</span></code></a> supports indexing. When
accessed at an index, a <cite>~.ResultSet</cite> object will materialize all its pages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM system.local&quot;</span><span class="p">)</span>
<span class="n">first_result</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># materializes results, fetching all pages</span>
</pre></div>
</div>
<p>This can send requests and load (possibly large) results into memory, so
<cite>~.ResultSet</cite> will log a warning on implicit materialization.</p>
</section>
<section id="trace-information-is-not-attached-to-executed-statements">
<h4>Trace information is not attached to executed Statements<a class="headerlink" href="#trace-information-is-not-attached-to-executed-statements" title="Link to this heading">¶</a></h4>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-318">PYTHON-318</a></p>
<p>Previously trace data was attached to Statements if tracing was enabled. This
could lead to confusion if the same statement was used for multiple executions.</p>
<p>Now, trace data is associated with the <code class="docutils literal notranslate"><span class="pre">ResponseFuture</span></code> and <code class="docutils literal notranslate"><span class="pre">ResultSet</span></code>
returned for each query:</p>
<p><a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResponseFuture.get_query_trace" title="cassandra.cluster.ResponseFuture.get_query_trace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.get_query_trace()</span></code></a></p>
<p><a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResponseFuture.get_all_query_traces" title="cassandra.cluster.ResponseFuture.get_all_query_traces"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResponseFuture.get_all_query_traces()</span></code></a></p>
<p><a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResultSet.get_query_trace" title="cassandra.cluster.ResultSet.get_query_trace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResultSet.get_query_trace()</span></code></a></p>
<p><a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.ResultSet.get_all_query_traces" title="cassandra.cluster.ResultSet.get_all_query_traces"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ResultSet.get_all_query_traces()</span></code></a></p>
</section>
<section id="binding-named-parameters-now-ignores-extra-names">
<h4>Binding named parameters now ignores extra names<a class="headerlink" href="#binding-named-parameters-now-ignores-extra-names" title="Link to this heading">¶</a></h4>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-178Cassadfasdf">PYTHON-178</a></p>
<p>Previously, <a class="reference internal" href="api/cassandra/query.html#cassandra.query.BoundStatement.bind" title="cassandra.query.BoundStatement.bind"><code class="xref py py-meth docutils literal notranslate"><span class="pre">BoundStatement.bind()</span></code></a> would raise if a mapping
was passed with extra names not found in the prepared statement.</p>
<p>Behavior in 3.0+ is to ignore extra names.</p>
</section>
</section>
<section id="blist-removed-as-soft-dependency">
<h3>blist removed as soft dependency<a class="headerlink" href="#blist-removed-as-soft-dependency" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-385">PYTHON-385</a></p>
<p>Previously the driver had a soft dependency on <code class="docutils literal notranslate"><span class="pre">blist</span> <span class="pre">sortedset</span></code>, using
that where available and using an internal fallback where possible.</p>
<p>Now, the driver never chooses the <code class="docutils literal notranslate"><span class="pre">blist</span></code> variant, instead returning the
internal <a class="reference internal" href="api/cassandra/util.html#cassandra.util.SortedSet" title="cassandra.util.SortedSet"><code class="xref py py-class docutils literal notranslate"><span class="pre">util.SortedSet</span></code></a> for all <code class="docutils literal notranslate"><span class="pre">set</span></code> results. The class implements
all standard set operations, so no integration code should need to change unless
it explicitly checks for <code class="docutils literal notranslate"><span class="pre">sortedset</span></code> type.</p>
</section>
<section id="metadata-api-updates">
<h3>Metadata API Updates<a class="headerlink" href="#metadata-api-updates" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-276">PYTHON-276</a>, <a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-408">PYTHON-408</a>, <a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-400">PYTHON-400</a>, <a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-422">PYTHON-422</a></p>
<p>Cassandra 3.0 brought a substantial overhaul to the internal schema metadata representation.
This version of the driver supports that metadata in addition to the legacy version. Doing so
also brought some changes to the metadata model.</p>
<p>The present API is documented: <a class="reference internal" href="api/cassandra/metadata.html#module-cassandra.metadata" title="cassandra.metadata"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">cassandra.metadata</span></code></a>. Changes highlighted below:</p>
<ul class="simple">
<li><p>All types are now exposed as CQL types instead of types derived from the internal server implementation</p></li>
<li><p>Some metadata attributes have changed names to match current nomenclature (for example, <code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.kind</span></code> in place of <code class="docutils literal notranslate"><span class="pre">Index.type</span></code>).</p></li>
<li><p>Some metadata attributes removed</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">TableMetadata.keyspace</span></code> reference replaced with <code class="xref py py-attr docutils literal notranslate"><span class="pre">TableMetadata.keyspace_name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ColumnMetadata.index</span></code> is removed table- and keyspace-level mappings are still maintained</p></li>
</ul>
</li>
</ul>
</section>
<section id="several-deprecated-features-are-removed">
<h3>Several deprecated features are removed<a class="headerlink" href="#several-deprecated-features-are-removed" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://datastax-oss.atlassian.net/browse/PYTHON-292">PYTHON-292</a></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ResponseFuture.result</span></code> timeout parameter is removed, use <code class="docutils literal notranslate"><span class="pre">Session.execute</span></code> timeout instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/031ebb0">031ebb0</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cluster.refresh_schema</span></code> removed, use <code class="docutils literal notranslate"><span class="pre">Cluster.refresh_*_metadata</span></code> instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/419fcdf">419fcdf</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cluster.submit_schema_refresh</span></code> removed (<a class="reference external" href="https://github.com/datastax/python-driver/commit/574266d">574266d</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqltypes</span></code> time/date functions removed, use <code class="docutils literal notranslate"><span class="pre">util</span></code> entry points instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/bb984ee">bb984ee</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">decoder</span></code> module removed (<a class="reference external" href="https://github.com/datastax/python-driver/commit/e16a073">e16a073</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TableMetadata.keyspace</span></code> attribute replaced with <code class="docutils literal notranslate"><span class="pre">keyspace_name</span></code> (<a class="reference external" href="https://github.com/datastax/python-driver/commit/cc94073">cc94073</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqlengine.columns.TimeUUID.from_datetime</span></code> removed, use <code class="docutils literal notranslate"><span class="pre">util</span></code> variant instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/96489cc">96489cc</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqlengine.columns.Float(double_precision)</span></code> parameter removed, use <code class="docutils literal notranslate"><span class="pre">columns.Double</span></code> instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/a2d3a98">a2d3a98</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqlengine</span></code> keyspace management functions are removed in favor of the strategy-specific entry points (<a class="reference external" href="https://github.com/datastax/python-driver/commit/4bd5909">4bd5909</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqlengine.Model.__polymorphic_*__</span></code> attributes removed, use <code class="docutils literal notranslate"><span class="pre">__discriminator*</span></code> attributes instead (<a class="reference external" href="https://github.com/datastax/python-driver/commit/9d98c8e">9d98c8e</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cqlengine.statements</span></code> will no longer warn about list list prepend behavior (<a class="reference external" href="https://github.com/datastax/python-driver/commit/79efe97">79efe97</a>)</p></li>
</ul>
</section>
</section>
<section id="upgrading-to-2-1-from-2-0">
<h2>Upgrading to 2.1 from 2.0<a class="headerlink" href="#upgrading-to-2-1-from-2-0" title="Link to this heading">¶</a></h2>
<p>Version 2.1 of the DataStax Python driver for Apache Cassandra
adds support for Cassandra 2.1 and version 3 of the native protocol.</p>
<p>Cassandra 1.2, 2.0, and 2.1 are all supported.  However, 1.2 only
supports protocol version 1, and 2.0 only supports versions 1 and
2, so some features may not be available.</p>
<section id="using-the-v3-native-protocol">
<h3>Using the v3 Native Protocol<a class="headerlink" href="#using-the-v3-native-protocol" title="Link to this heading">¶</a></h3>
<p>By default, the driver will attempt to use version 2 of the
native protocol.  To use version 3, you must explicitly
set the <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">protocol_version</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that protocol version 3 is only supported by Cassandra 2.1+.</p>
<p>In future releases, the driver may default to using protocol version
3.</p>
</section>
<section id="working-with-user-defined-types">
<h3>Working with User-Defined Types<a class="headerlink" href="#working-with-user-defined-types" title="Link to this heading">¶</a></h3>
<p>Cassandra 2.1 introduced the ability to define new types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">USE</span> <span class="n">KEYSPACE</span> <span class="n">mykeyspace</span><span class="p">;</span>

<span class="n">CREATE</span> <span class="n">TYPE</span> <span class="n">address</span> <span class="p">(</span><span class="n">street</span> <span class="n">text</span><span class="p">,</span> <span class="n">city</span> <span class="n">text</span><span class="p">,</span> <span class="nb">zip</span> <span class="nb">int</span><span class="p">);</span>
</pre></div>
</div>
<p>The driver generally expects you to use instances of a specific
class to represent column values of this type.  You can let the
driver know what class to use with <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.register_user_type" title="cassandra.cluster.Cluster.register_user_type"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Cluster.register_user_type()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Address</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">street</span><span class="p">,</span> <span class="n">city</span><span class="p">,</span> <span class="n">zipcode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">street</span> <span class="o">=</span> <span class="n">street</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">city</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zipcode</span> <span class="o">=</span> <span class="n">zipcode</span>

<span class="n">cluster</span><span class="o">.</span><span class="n">register_user_type</span><span class="p">(</span><span class="s1">&#39;mykeyspace&#39;</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="n">Address</span><span class="p">)</span>
</pre></div>
</div>
<p>When inserting data for <code class="docutils literal notranslate"><span class="pre">address</span></code> columns, you should pass in
instances of <code class="docutils literal notranslate"><span class="pre">Address</span></code>.  When querying data, <code class="docutils literal notranslate"><span class="pre">address</span></code> column
values will be instances of <code class="docutils literal notranslate"><span class="pre">Address</span></code>.</p>
<p>If no class is registered for a user-defined type, query results
will use a <code class="docutils literal notranslate"><span class="pre">namedtuple</span></code> class and data may only be inserted
though prepared statements.</p>
<p>See <a class="reference internal" href="user_defined_types.html#udts"><span class="std std-ref">User Defined Types</span></a> for more details.</p>
</section>
<section id="customizing-encoders-for-non-prepared-statements">
<h3>Customizing Encoders for Non-prepared Statements<a class="headerlink" href="#customizing-encoders-for-non-prepared-statements" title="Link to this heading">¶</a></h3>
<p>Starting with version 2.1 of the driver, it is possible to customize
how Python types are converted to CQL literals when working with
non-prepared statements.  This is done on a per-<a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session" title="cassandra.cluster.Session"><code class="xref py py-class docutils literal notranslate"><span class="pre">Session</span></code></a>
basis through <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.encoder" title="cassandra.cluster.Session.encoder"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.encoder</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">()</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">cluster</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">encoder</span><span class="o">.</span><span class="n">mapping</span><span class="p">[</span><span class="nb">tuple</span><span class="p">]</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">encoder</span><span class="o">.</span><span class="n">cql_encode_tuple</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="getting_started.html#type-conversions"><span class="std std-ref">Type Conversions</span></a> for the table of default CQL literal conversions.</p>
</section>
<section id="using-client-side-protocol-level-timestamps">
<h3>Using Client-Side Protocol-Level Timestamps<a class="headerlink" href="#using-client-side-protocol-level-timestamps" title="Link to this heading">¶</a></h3>
<p>With version 3 of the native protocol, timestamps may be supplied by the
client at the protocol level.  (Normally, if they are not specified within
the CQL query itself, a timestamp is generated server-side.)</p>
<p>When <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> is set to 3 or higher, the driver
will automatically use client-side timestamps with microsecond precision
unless <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Session.use_client_timestamp" title="cassandra.cluster.Session.use_client_timestamp"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Session.use_client_timestamp</span></code></a> is changed to <code class="xref py py-const docutils literal notranslate"><span class="pre">False</span></code>.
If a timestamp is specified within the CQL query, it will override the
timestamp generated by the driver.</p>
</section>
</section>
<section id="upgrading-to-2-0-from-1-x">
<h2>Upgrading to 2.0 from 1.x<a class="headerlink" href="#upgrading-to-2-0-from-1-x" title="Link to this heading">¶</a></h2>
<p>Version 2.0 of the DataStax Python driver for Apache Cassandra
includes some notable improvements over version 1.x.  This version
of the driver supports Cassandra 1.2, 2.0, and 2.1.  However, not
all features may be used with Cassandra 1.2, and some new features
in 2.1 are not yet supported.</p>
<section id="using-the-v2-native-protocol">
<h3>Using the v2 Native Protocol<a class="headerlink" href="#using-the-v2-native-protocol" title="Link to this heading">¶</a></h3>
<p>By default, the driver will attempt to use version 2 of Cassandra’s
native protocol. You can explicitly set the protocol version to
2, though:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">protocol_version</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>When working with Cassandra 1.2, you will need to
explicitly set the <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.protocol_version" title="cassandra.cluster.Cluster.protocol_version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">protocol_version</span></code></a> to 1:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cassandra.cluster</span> <span class="kn">import</span> <span class="n">Cluster</span>

<span class="n">cluster</span> <span class="o">=</span> <span class="n">Cluster</span><span class="p">(</span><span class="n">protocol_version</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="automatic-query-paging">
<h3>Automatic Query Paging<a class="headerlink" href="#automatic-query-paging" title="Link to this heading">¶</a></h3>
<p>Version 2 of the native protocol adds support for automatic query
paging, which can make dealing with large result sets much simpler.</p>
<p>See <a class="reference internal" href="query_paging.html#query-paging"><span class="std std-ref">Paging Large Queries</span></a> for full details.</p>
</section>
<section id="protocol-level-batch-statements">
<h3>Protocol-Level Batch Statements<a class="headerlink" href="#protocol-level-batch-statements" title="Link to this heading">¶</a></h3>
<p>With version 1 of the native protocol, batching of statements required
using a <a class="reference external" href="http://cassandra.apache.org/doc/cql3/CQL-3.0.html#batchStmt">BATCH cql query</a>.
With version 2 of the native protocol, you can now batch statements at
the protocol level. This allows you to use many different prepared
statements within a single batch.</p>
<p>See <a class="reference internal" href="api/cassandra/query.html#cassandra.query.BatchStatement" title="cassandra.query.BatchStatement"><code class="xref py py-class docutils literal notranslate"><span class="pre">BatchStatement</span></code></a> for details and usage examples.</p>
</section>
<section id="sasl-based-authentication">
<h3>SASL-based Authentication<a class="headerlink" href="#sasl-based-authentication" title="Link to this heading">¶</a></h3>
<p>Also new in version 2 of the native protocol is SASL-based authentication.
See the section on <a class="reference internal" href="security.html#security"><span class="std std-ref">Security</span></a> for details and examples.</p>
</section>
<section id="lightweight-transactions">
<h3>Lightweight Transactions<a class="headerlink" href="#lightweight-transactions" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="http://www.datastax.com/dev/blog/lightweight-transactions-in-cassandra-2-0">Lightweight transactions</a> are another new feature.  To use lightweight transactions, add <code class="docutils literal notranslate"><span class="pre">IF</span></code> clauses
to your CQL queries and set the <a class="reference internal" href="api/cassandra/query.html#cassandra.query.Statement.serial_consistency_level" title="cassandra.query.Statement.serial_consistency_level"><code class="xref py py-attr docutils literal notranslate"><span class="pre">serial_consistency_level</span></code></a>
on your statements.</p>
</section>
<section id="calling-cluster-shutdown">
<h3>Calling Cluster.shutdown()<a class="headerlink" href="#calling-cluster-shutdown" title="Link to this heading">¶</a></h3>
<p>In order to fix some issues around garbage collection and unclean interpreter
shutdowns, version 2.0 of the driver requires you to call <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster.shutdown" title="cassandra.cluster.Cluster.shutdown"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Cluster.shutdown()</span></code></a>
on your <a class="reference internal" href="api/cassandra/cluster.html#cassandra.cluster.Cluster" title="cassandra.cluster.Cluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Cluster</span></code></a> objects when you are through with them.
This helps to guarantee a clean shutdown.</p>
</section>
<section id="id2">
<h3>Deprecations<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h3>
<p>The following functions have moved from <code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> to <code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code>.
The original functions have been left in place with a <code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> for
now:</p>
<ul class="simple">
<li><p><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.tuple_factory" title="cassandra.decoder.tuple_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.decoder.tuple_factory</span></code></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.tuple_factory" title="cassandra.query.tuple_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.query.tuple_factory</span></code></a></p></li>
<li><p><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.named_tuple_factory" title="cassandra.decoder.named_tuple_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.decoder.named_tuple_factory</span></code></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.named_tuple_factory" title="cassandra.query.named_tuple_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.query.named_tuple_factory</span></code></a></p></li>
<li><p><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.dict_factory" title="cassandra.decoder.dict_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.decoder.dict_factory</span></code></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.dict_factory" title="cassandra.query.dict_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.query.dict_factory</span></code></a></p></li>
<li><p><a class="reference internal" href="api/cassandra/decoder.html#cassandra.decoder.ordered_dict_factory" title="cassandra.decoder.ordered_dict_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.decoder.ordered_dict_factory</span></code></a> has moved to
<a class="reference internal" href="api/cassandra/query.html#cassandra.query.ordered_dict_factory" title="cassandra.query.ordered_dict_factory"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cassandra.query.ordered_dict_factory</span></code></a></p></li>
</ul>
</section>
<section id="dependency-changes">
<h3>Dependency Changes<a class="headerlink" href="#dependency-changes" title="Link to this heading">¶</a></h3>
<p>The following dependencies have officially been made optional:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scales</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blist</span></code></p></li>
</ul>
<p>And one new dependency has been added (to enable Python 3 support):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">six</span></code></p></li>
</ul>
</section>
</section>
</section>

                
                    <div class="post-content">
                        
    <div class="feedback-container">
        <p class="feedback-container__title">Was this page helpful?</p>
        <span data-tooltip tabindex="1" title="Yes" data-position="top">
            <button class="feedback-container__button" id="feedback-positive">
                <i class="feedback-container__icon scylla-icon scylla-icon--thumbs-up"></i>
            </button>
        </span>
        <span data-tooltip tabindex="1" title="No" data-position="top">
            <button class="feedback-container__button" id="feedback-negative">
                <i class="feedback-container__icon scylla-icon scylla-icon--thumbs-down"></i>
            </button>
        </span>
        <div class="feedback-container__message" id="feedback-message"></div>
    </div>

    <script>
        function resetFeedbackButtonActive() {
            const feedbackButtons = document.getElementsByClassName('feedback-container__button');
            for (let i = 0; i < feedbackButtons.length; i++) {
                feedbackButtons[i].classList.remove('active');
            }
        }

        function showMessage(liked) {
            const feedbackMessage = document.getElementById('feedback-message');
            const themeGithubRepository = true;
            let message = 'Great! Thanks for your feedback.';
            if (themeGithubRepository && !liked) {
                message = "Thanks for your feedback! Please don't hesitate to <a href='https://github.com/scylladb/python-driver/issues/new?title=docs:%20Issue in page Upgrading&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://python-driver.docs.scylladb.com/3.25.11-scylla/upgrading%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation'>create an issue</a> if you have any suggestions on how we can improve.";
            }
            feedbackMessage.innerHTML = message;
        }

        function sendGaEvent(liked) {
            const event_label = liked ? "positive" : "negative";
            const event = "feedback_" + event_label;
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                'event': event,
            });
        }

        const positiveFeebackButton = document.getElementById('feedback-positive');
        const negativeFeedbackButton = document.getElementById('feedback-negative');

        positiveFeebackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(true);
            showMessage(true);
            positiveFeebackButton.classList.add('active');
        });

        negativeFeedbackButton.addEventListener('click', function() {
            resetFeedbackButtonActive();
            sendGaEvent(false);
            showMessage(false);
            negativeFeedbackButton.classList.add('active');
        });
    </script>

                        <div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="scylla_specific.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Scylla Specific Features
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="execution_profiles.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Execution Profiles
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div>
                        <div class="notice">
<p>
ScyllaDB Python Driver is available under the <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache v2 License</a>.
ScyllaDB Python Driver is a fork of <a href="https://github.com/datastax/python-driver">DataStax Python Driver</a>.
See Copyright <a href="https://python-driver.docs.scylladb.com/stable/#copyright">here</a>.</p>
</div>
                    </div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__title">
            Scylla Python Driver
        </div>
        <div class="side-nav__versions"><ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
    <li class="scylla-dropdown__item">
        <a class="scylla-dropdown__title" href="#">
            
                3.25.11
            
            <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
        </a>
        <ul class="menu scylla-dropdown__content">
            
                
            
            
                
                    <li>
                        <a href="../stable/upgrading.html">
                            3.26.4
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="upgrading.html">
                            3.25.11
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.25.4-scylla/upgrading.html">
                            3.25.4
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.24.8-scylla/upgrading.html">
                            3.24.8
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.22.3-scylla/upgrading.html">
                            3.22.3
                        </a>
                    </li>
                
            
                
                    <li>
                        <a href="../3.21.0-scylla/upgrading.html">
                            3.21.0
                        </a>
                    </li>
                
            
        </ul>
    </li>
</ul></div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="api/index.html">API Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra</span></code> - Exceptions and Enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cluster.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cluster</span></code> - Clusters and Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/policies.html"><code class="docutils literal notranslate"><span class="pre">cassandra.policies</span></code> - Load balancing and Failure Handling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/auth.html"><code class="docutils literal notranslate"><span class="pre">cassandra.auth</span></code> - Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/graph.html"><code class="docutils literal notranslate"><span class="pre">cassandra.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/metadata.html"><code class="docutils literal notranslate"><span class="pre">cassandra.metadata</span></code> - Schema and Ring Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/metrics.html"><code class="docutils literal notranslate"><span class="pre">cassandra.metrics</span></code> - Performance Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/query.html"><code class="docutils literal notranslate"><span class="pre">cassandra.query</span></code> - Prepared Statements, Batch Statements, Tracing, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/pool.html"><code class="docutils literal notranslate"><span class="pre">cassandra.pool</span></code> - Hosts and Connection Pools</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/protocol.html"><code class="docutils literal notranslate"><span class="pre">cassandra.protocol</span></code> - Protocol Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/encoder.html"><code class="docutils literal notranslate"><span class="pre">cassandra.encoder</span></code> - Encoders for non-prepared Statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/decoder.html"><code class="docutils literal notranslate"><span class="pre">cassandra.decoder</span></code> - Data Return Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/concurrent.html"><code class="docutils literal notranslate"><span class="pre">cassandra.concurrent</span></code> - Utilities for Concurrent Statement Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/connection.html"><code class="docutils literal notranslate"><span class="pre">cassandra.connection</span></code> - Low Level Connection Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/util.html"><code class="docutils literal notranslate"><span class="pre">cassandra.util</span></code> - Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/timestamps.html"><code class="docutils literal notranslate"><span class="pre">cassandra.timestamps</span></code> - Timestamp Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/asyncioreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncioreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncio</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/asyncorereactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.asyncorereactor</span></code> - <code class="docutils literal notranslate"><span class="pre">asyncore</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/eventletreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.eventletreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">eventlet</span></code>-compatible Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/libevreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.libevreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">libev</span></code> Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/geventreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.geventreactor</span></code> - <code class="docutils literal notranslate"><span class="pre">gevent</span></code>-compatible Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/io/twistedreactor.html"><code class="docutils literal notranslate"><span class="pre">cassandra.io.twistedreactor</span></code> - Twisted Event Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/models.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.models</span></code> - Table models for object mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/columns.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.columns</span></code> - Column types for object mapping models</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/query.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.query</span></code> - Query and filter model objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/connection.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.connection</span></code> - Connection management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/management.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.management</span></code> - Schema management for cqlengine</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/cqlengine/usertype.html"><code class="docutils literal notranslate"><span class="pre">cassandra.cqlengine.usertype</span></code> - Model classes for User Defined Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/index.html"><code class="docutils literal notranslate"><span class="pre">cassandra.datastax.graph</span></code> - Graph Statements, Options, and Row Factories</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/query.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.query</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/cassandra/datastax/graph/fluent/predicates.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cassandra.datastax.graph.fluent.predicates</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="scylla_specific.html">Scylla Specific Features</a></li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">Upgrading</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="execution_profiles.html">Execution Profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="query_paging.html">Paging Large Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lwt.html">Lightweight Transactions (Compare-and-set)</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_defined_types.html">User Defined Types</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="object_mapper.html">Object Mapper</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/upgrade_guide.html">Upgrade Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/queryset.html">Making Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/batches.html">Batch Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/connections.html">Connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/third_party.html">Third party integrations</a></li>
<li class="toctree-l2"><a class="reference internal" href="cqlengine/faq.html">Frequently Asked Questions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dates_and_times.html">Working with Dates and Times</a></li>
<li class="toctree-l1"><a class="reference internal" href="scylla_cloud.html">Scylla Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/python-driver/issues/new?title=docs:%20Issue in page Upgrading&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://python-driver.docs.scylladb.com/3.25.11-scylla/upgrading%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix&labels=documentation"
               target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                <a href="https://github.com/scylladb/python-driver/edit/master/docs/upgrading.rst"
                   target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Upgrading</a><ul>
<li><a class="reference internal" href="#upgrading-from-dse-driver">Upgrading from dse-driver</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#import-from-the-cassandra-module">Import from the cassandra module</a></li>
<li><a class="reference internal" href="#dse-graph">dse-graph</a></li>
<li><a class="reference internal" href="#session-execute-and-session-execute-async-api">Session.execute and Session.execute_async API</a></li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-to-3-0">Upgrading to 3.0</a><ul>
<li><a class="reference internal" href="#default-consistency-is-now-local-one">Default consistency is now <code class="docutils literal notranslate"><span class="pre">LOCAL_ONE</span></code></a></li>
<li><a class="reference internal" href="#execution-api-updates">Execution API Updates</a><ul>
<li><a class="reference internal" href="#result-return-normalization">Result return normalization</a></li>
<li><a class="reference internal" href="#trace-information-is-not-attached-to-executed-statements">Trace information is not attached to executed Statements</a></li>
<li><a class="reference internal" href="#binding-named-parameters-now-ignores-extra-names">Binding named parameters now ignores extra names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#blist-removed-as-soft-dependency">blist removed as soft dependency</a></li>
<li><a class="reference internal" href="#metadata-api-updates">Metadata API Updates</a></li>
<li><a class="reference internal" href="#several-deprecated-features-are-removed">Several deprecated features are removed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-to-2-1-from-2-0">Upgrading to 2.1 from 2.0</a><ul>
<li><a class="reference internal" href="#using-the-v3-native-protocol">Using the v3 Native Protocol</a></li>
<li><a class="reference internal" href="#working-with-user-defined-types">Working with User-Defined Types</a></li>
<li><a class="reference internal" href="#customizing-encoders-for-non-prepared-statements">Customizing Encoders for Non-prepared Statements</a></li>
<li><a class="reference internal" href="#using-client-side-protocol-level-timestamps">Using Client-Side Protocol-Level Timestamps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-to-2-0-from-1-x">Upgrading to 2.0 from 1.x</a><ul>
<li><a class="reference internal" href="#using-the-v2-native-protocol">Using the v2 Native Protocol</a></li>
<li><a class="reference internal" href="#automatic-query-paging">Automatic Query Paging</a></li>
<li><a class="reference internal" href="#protocol-level-batch-statements">Protocol-Level Batch Statements</a></li>
<li><a class="reference internal" href="#sasl-based-authentication">SASL-based Authentication</a></li>
<li><a class="reference internal" href="#lightweight-transactions">Lightweight Transactions</a></li>
<li><a class="reference internal" href="#calling-cluster-shutdown">Calling Cluster.shutdown()</a></li>
<li><a class="reference internal" href="#id2">Deprecations</a></li>
<li><a class="reference internal" href="#dependency-changes">Dependency Changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/" target="_blank">Docs</a>
                <a class="footer-links__link" href="https://university.scylladb.com/" target="_blank">University</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/" target="_blank">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/" target="_blank">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="https://forum.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="Community forum" data-position="bottom">
                        <img src="_static/img/icons/icon-forum.svg" alt="Forum Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; ScyllaDB 2021 and © DataStax 2013-2017
                        
                    
                </div>
            
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.6.5</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                    style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>